angular.module("d3app",["ngRoute","d3"]),angular.module("d3",[]).factory("d3Service",["$document","$q","$rootScope",function(a,b,c){function d(){c.$apply(function(){e.resolve(window.d3)})}var e=q.defer(),f=a[0].createElement("script");f.type="text/javascript",f.async=!0,f.src="public/vendors/d3/build/d3.min.js",f.onreadystatechange=function(){"complete"==this.readyState&&d()},f.onload=d;var g=a[0].getElementsByTagName("body")[0];return g.appendChild(f),{d3:function(){return e.promise}}}]),angular.module("d3app").config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"/views/firstgraph.html",controller:"FirstGraphController",controllerAs:"one"}),b.html5Mode(!0)}]),angular.module("d3App.directives",["d3"]).directive("d3Bars",["d3Service",function(a){return{restrict:"EA",scope:{data:"="},link:function(b,c,d){a.d3().then(function(a){console.log(a);var e=parseInt(d.margin)||20,f=parseInt(d.barHeight)||20,g=parseInt(d.barPadding)||5,h=a.select(element[0]).append("svg").style("width","100%");window.onresize=function(){b.$apply()},b.$watch(function(){return angular.element($window)[0].innerWidth},function(){b.render(b.data)}),b.$watch("data",function(a,c){return b.render(a)},!0),b.render=function(d){if(h.selectAll("*").remove(),d){var i=a.select(c[0]).node().offsetWidth-e,j=b.data.length*(f+g),k=a.scale.category20(),l=a.scale.linear().domain([0,a.max(d,function(a){return a.score})]).range([0,i]);h.attr("height",j),h.selectAll("rect").data(d).enter().append("rect").attr("height",f).attr("width",140).attr("x",Math.round(e/2)).attr("y",function(a,b){return b*(f+g)}).attr("fill",function(a){return k(a.score)}).transition().duration(1e3).attr("width",function(a){return l(a.score)})}}})}}}]),angular.module("d3app").controller("FirstGraphController",["$scope","$http","$location",function(a,b,c){a.greeting="Resize the page to see the re-rendering",a.data=[{name:"Greg",score:98},{name:"Ari",score:96},{name:"Q",score:75},{name:"Loser",score:48}]}]);